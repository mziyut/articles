---
title: drizzle-seed ã‚’ä½¿ã£ã¦ DB ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã™ã‚‹
tags:
  - TypeScript
  - Drizzle
  - drizzle-seed
private: false
updated_at: '2025-07-30T00:00:20+09:00'
id: 3b9c3d34a99f6728e086
organization_url_name: foundingbase
slide: false
ignorePublish: false
---

## ã¯ã˜ã‚ã«

[Drizzle ORM](https://orm.drizzle.team/) ã‚’ä½¿ã£ã¦ã„ã‚‹ Project ã§ DB ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ãŸã‹ã£ãŸã€‚
drizzle-seed ã® reset ã‚’ä½¿ã£ã¦ reset ã™ã‚‹ script ã‚’ç”¨æ„ã—ãŸã®ã§ãƒ¡ãƒ¢
ãªãŠã€ Drizzle ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ç­‰ã¯å‰²æ„›ã™ã‚‹ã€‚

## drizzle-seed, tsx ã® install

ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹

`tsx` ã¯ å¾Œä½œæˆã™ã‚‹ Script ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«åˆ©ç”¨ã™ã‚‹ã€‚
yarn ã‚„ pnpm ç­‰åˆ©ç”¨ã—ã¦ã„ã‚‹æ–¹ã¯é©å®œã‚³ãƒãƒ³ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

```sh
npm i drizzle-seed tsx
```

## Script ã‚’ç”¨æ„

```ts:reset.ts
import { drizzle } from 'drizzle-orm/postgres-js';
import { reset } from 'drizzle-seed';
import postgres from 'postgres';
import * as schema from './drizzle/schema';

export async function clearDatabase() {
  console.log('ğŸ—‘ï¸ Clearing database...');

  const sql = postgres(process.env.DATABASE_URL, { prepare: false });
  const db = drizzle(sql, { schema });
  await reset(db, schema);
  await sql.end();
}

(async () => {
  await clearDatabase();
})();
```

## Script ã‚’å®Ÿè¡Œã™ã‚‹

```sh
> tsx ./reset.ts

ğŸ—‘ï¸ Clearing database...
```

## Ref

https://orm.drizzle.team

https://orm.drizzle.team/docs/seed-overview

https://www.npmjs.com/package/tsx
