---
title: drizzle-seed を使って DB のデータをリセットする
tags:
  - TypeScript
  - Drizzle
  - drizzle-seed
private: false
updated_at: '2025-07-30T00:00:20+09:00'
id: 3b9c3d34a99f6728e086
organization_url_name: foundingbase
slide: false
ignorePublish: false
---

## はじめに

[Drizzle ORM](https://orm.drizzle.team/) を使っている Project で DB のデータをリセットしたかった。
drizzle-seed の reset を使って reset する script を用意したのでメモ
なお、 Drizzle のセットアップ等は割愛する。

## drizzle-seed, tsx の install

下記コマンドを実行する

`tsx` は 後作成する Script を実行するために利用する。
yarn や pnpm 等利用している方は適宜コマンドを変更してください。

```sh
npm i drizzle-seed tsx
```

## Script を用意

```ts:reset.ts
import { drizzle } from 'drizzle-orm/postgres-js';
import { reset } from 'drizzle-seed';
import postgres from 'postgres';
import * as schema from './drizzle/schema';

export async function clearDatabase() {
  console.log('🗑️ Clearing database...');

  const sql = postgres(process.env.DATABASE_URL, { prepare: false });
  const db = drizzle(sql, { schema });
  await reset(db, schema);
  await sql.end();
}

(async () => {
  await clearDatabase();
})();
```

## Script を実行する

```sh
> tsx ./reset.ts

🗑️ Clearing database...
```

## Ref

https://orm.drizzle.team

https://orm.drizzle.team/docs/seed-overview

https://www.npmjs.com/package/tsx
